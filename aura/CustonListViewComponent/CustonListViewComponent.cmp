<aura:component controller="SobjectCRUDController" implements="flexipage:availableForAllPageTypes" access="global">
    <aura:attribute name="allData" type="Object"/>
    <aura:attribute name="mapObjAndFields" type="Map" default="{}"/>
    <aura:attribute name="mapValueAndLabel" type="Map" default="{}"/>
    <aura:attribute name="sObjectTypes" type="String[]"/>
    <aura:attribute name="selectedValue" type="String"/>
    <aura:attribute name="fieldOptions" type="List" default="[]"/>
    <aura:attribute name="fieldSelected" type="List" default="[]"/>
    <aura:attribute name="tableData" type="Object"/>
    <aura:attribute name="columns" type="List"/>
    <aura:attribute name="selectedRows" type="List"/>
    <aura:attribute name="showErrors" type="Boolean" default="false"/>
    <aura:attribute name="errorMessage" type="String"/>
    
    <aura:handler name="init" value="{! this }" action="{! c.doInit }"/>

    <aura:if isTrue="{!v.showErrors}">
            <div class="slds-notify slds-notify_toast slds-theme_error">
                <span class="slds-assistive-text">error</span>
                <div class="slds-notify__content">
                    <h5 class="slds-text-heading_small slds-align_absolute-center">Error Message </h5>
                    <br/>
                    <p class="slds-align_absolute-center">{!v.errorMessage}</p>                
                </div>
                <div class="slds-notify__close">
                    <lightning:buttonIcon onclick="{!c.closeErrorMessage}" iconName="utility:close"  variant="bare-inverse"/>
                </div>
            </div>
    </aura:if>
    <lightning:layout verticalAlign="center" >
        <lightning:layoutItem padding="around-small" size="3">
            <img src="{!$Resource.logo}"/>
        </lightning:layoutItem>
        <lightning:layoutItem padding="around-small">
            <lightning:select name="selectedValue" label="Select the object" onchange="{!c.changeSelectValue}"
              value="{!v.selectedValue}">
                <aura:iteration items="{!v.sObjectTypes}" var="sObjectType">
                    <option text="{!sObjectType}" value="{!sObjectType}"></option>
                </aura:iteration>
            </lightning:select>
        </lightning:layoutItem>
        <lightning:layoutItem padding="around-small">
            <lightning:dualListbox 
            aura:id="listBox"
            name="multipleOptions" 
            label= "Select fields" 
            sourceLabel="Available" 
            selectedLabel="Selected" 
            options="{!v.fieldOptions}"
            value="{!v.fieldSelected}" 
            onchange="{! c.handleChangeField }"/>
        </lightning:layoutItem>
        <lightning:layoutItem padding="around-small">
            <lightning:buttonIcon iconName="utility:edit" size="large"  variant="border-filled" alternativeText="Mass edit" />
        </lightning:layoutItem>
        <lightning:layoutItem padding="around-small">
            <lightning:buttonIcon iconName="utility:record_create" size="large"  variant="border-filled" alternativeText="Mass create" />
        </lightning:layoutItem>
        <lightning:layoutItem padding="around-small">
            <lightning:buttonIcon onclick="{!c.handleClickButton}" iconName="utility:delete" size="large"  variant="border-filled" alternativeText="Mass delete" />
        </lightning:layoutItem>
        <lightning:layoutItem padding="around-small">
            <lightning:buttonIcon iconName="utility:relate" size="large"  variant="border-filled" alternativeText="Mass clone" />
        </lightning:layoutItem>
        <lightning:layoutItem padding="around-small">
            <lightning:buttonIcon iconName="utility:arrowdown" size="large"  variant="border-filled" alternativeText="Import" />
        </lightning:layoutItem>
        <lightning:layoutItem padding="around-small">
            <lightning:buttonIcon iconName="utility:arrowup" size="large"  variant="border-filled" alternativeText="Export" />
        </lightning:layoutItem>
        <lightning:layoutItem padding="around-small">
            <lightning:buttonIcon iconName="utility:file" size="large"  variant="border-filled" alternativeText="Save to pdf" />
        </lightning:layoutItem>
    </lightning:layout>
    <lightning:datatable
    keyField="Id"
    data="{! v.tableData }"
    columns="{! v.columns }"
    showRowNumberColumn="true"
    onrowselection="{! c.handleRowSelection}"/>
    <c:PaginationComponent aura:id="paginationCmp" tableData="{!v.tableData}" allData="{!v.allData}"/>
</aura:component>	
